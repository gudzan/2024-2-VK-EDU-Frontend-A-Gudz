import{t as N,g,d as S,c as b,a as C}from"./dataService -DYm5JXEv.js";const p=document.querySelector(".chats__inner"),E=e=>{if(!e)return;const t=document.createElement("li"),n=document.createElement("a"),c=document.createElement("img"),s=document.createElement("div"),l=document.createElement("span"),m=document.createElement("span"),o=document.createElement("div"),u=document.createElement("span"),h=document.createElement("div");return t.append(n),n.append(c),n.append(s),n.append(o),s.append(l),s.append(m),o.append(u),o.append(h),t.className="chat",n.className="chat__link",n.href=`./chat.html?chatId=${e.id}`,c.setAttribute("src",e.userAvatar),s.className="chat__main",l.className="chat__main-name",m.className="chat__main-message",o.className="chat__info",u.className="chat__info-time",h.className="material-icons",l.innerText=e.userName,m.innerText=e.lastMessage,u.innerText=N(e.lastMessageTime),h.innerText=e.lastMessageIcon,t},q=e=>{const t=E(e);p.prepend(t)},v=e=>{const t=new DocumentFragment;if(p.textContent="",e.length===0){const n=document.createElement("span");n.className="notFound",n.innerText="Чатов нет",t.append(n)}else for(let n of e){const c=E(n);t.append(c)}p.append(t)},_=g(),w=document.querySelector(".fix-button"),f=document.querySelector(".new-сhat"),I=document.querySelector(".new-сhat__close"),d=document.querySelector(".overlay"),r=document.querySelector(".form-input"),k=document.querySelector(".header__box-search-button"),a=document.querySelector(".search-input"),x=document.querySelector(".header-box__close"),L=document.querySelector(".header__left-title"),T=()=>{f.classList.add("new-сhat--open"),d.classList.add("overlay--open"),r.focus()},i=()=>{f.classList.contains("new-сhat--open")&&d.classList.contains("overlay--open")&&(f.classList.remove("new-сhat--open"),d.classList.remove("overlay--open"))},M=e=>{if(e.preventDefault(),r.value==="")return;const t=b(r.value);q(t),_.unshift(t),i(),r.value=""},F=()=>{a.classList.add("search-input--open"),L.classList.add("header__left-title--hidden"),a.focus()},y=()=>{a.value="",a.classList.remove("search-input--open"),L.classList.remove("header__left-title--hidden"),v(_)},B=e=>{const t=C(e.target.value);v(t)},D=e=>{e.key==="Escape"&&(y(),i())};document.addEventListener("keydown",D.bind(void 0));a.addEventListener("input",S(B.bind(void 0),250));document.addEventListener("submit",M.bind(void 0));w.addEventListener("click",T);I.addEventListener("click",i);d.addEventListener("click",i);x.addEventListener("click",y);k.addEventListener("click",F);v(_);
