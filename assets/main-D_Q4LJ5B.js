import{t as g,g as S,d as x,c as q,a as w}from"./dataService -DYm5JXEv.js";const h=document.querySelector(".chats__inner"),L=(e,t)=>{if(!e)return;const n=document.createElement("li"),a=document.createElement("a"),E=document.createElement("img"),c=document.createElement("div"),l=document.createElement("span"),i=document.createElement("span"),s=document.createElement("div"),m=document.createElement("span"),u=document.createElement("div");return n.append(a),a.append(E),a.append(c),a.append(s),c.append(l),c.append(i),s.append(m),s.append(u),n.className="chat"+(t?" chat--new":""),a.className="chat__link",a.href=`./chat.html?chatId=${e.id}`,E.setAttribute("src",e.userAvatar),c.className="chat__main",l.className="chat__main-name",i.className="chat__main-message",s.className="chat__info",m.className="chat__info-time",u.className="material-icons",l.innerText=e.userName,i.innerText=e.lastMessage,m.innerText=g(e.lastMessageTime),u.innerText=e.lastMessageIcon,n},C=e=>{const t=L(e,!0);h.prepend(t)},_=e=>{const t=new DocumentFragment;if(h.textContent="",e.length===0){const n=document.createElement("span");n.className="notFound",n.innerText="Чатов нет",t.append(n)}else for(let n of e){const a=L(n,!1);t.append(a)}h.append(t)},f=S(),I=document.querySelector(".fix-button"),p=document.querySelector(".new-сhat"),k=document.querySelector(".new-сhat__close"),r=document.querySelector(".overlay"),o=document.querySelector(".form-input"),T=document.querySelector(".header__box-search-button"),y=document.querySelector(".search-input"),v=document.querySelector(".header__box-search"),M=document.querySelector(".header-box__close"),N=document.querySelector(".header__left-title"),F=()=>{p.classList.add("new-сhat--open"),r.classList.add("overlay--open"),o.focus()},d=()=>{p.classList.contains("new-сhat--open")&&r.classList.contains("overlay--open")&&(p.classList.remove("new-сhat--open"),r.classList.remove("overlay--open"))},B=e=>{if(e.preventDefault(),o.value==="")return;const t=q(o.value);C(t),f.unshift(t),d(),o.value=""},D=()=>{v.classList.add("header__box-search--open"),N.classList.add("header__left-title--hidden"),y.focus()},b=()=>{y.value="",v.classList.remove("header__box-search--open"),N.classList.remove("header__left-title--hidden"),_(f)},A=e=>{const t=w(e.target.value);_(t)},$=e=>{e.key==="Escape"&&(b(),d())};document.addEventListener("keydown",$.bind(void 0));v.addEventListener("input",x(A.bind(void 0),250));document.addEventListener("submit",B.bind(void 0));I.addEventListener("click",F);k.addEventListener("click",d);r.addEventListener("click",d);M.addEventListener("click",b);T.addEventListener("click",D);_(f);
