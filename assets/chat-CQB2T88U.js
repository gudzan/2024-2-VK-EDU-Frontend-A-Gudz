import{t as u,b as p,e as _,f as g}from"./dataService -hicFx82M.js";const c=document.querySelector(".messages"),i=document.querySelector(".message__inner"),l=e=>{if(!e)return;const s=document.createElement("li"),n=document.createElement("span"),t=document.createElement("div"),a=document.createElement("span");if(s.append(n),s.append(t),t.append(a),s.className="message",e.sender===1){s.className+=" message--my";const r=document.createElement("div");t.className="message__info message__info--my",t.append(r),r.className="material-icons",r.innerText="done_all"}else s.className+=" message--another",t.className="message__info message__info--another";return n.className="message__text",a.className="message__info-time",n.innerText=e.text,a.innerText=u(e.time),s},f=e=>{const s=l(e);i.append(s),c.scrollTop=c.scrollHeight},h=e=>{if(!e)return;const s=new DocumentFragment;for(let n of e){const t=l(n);s.append(t)}i.append(s),c.scrollTop=c.scrollHeight},N=document.querySelector(".header__settings"),v=e=>{if(!e)return;const s=document.createElement("div"),n=document.createElement("img"),t=document.createElement("div"),a=document.createElement("span"),r=document.createElement("span");s.className="header__user",n.className="header__user-image",t.className="header__user-info",a.className="header__user-name",r.className="header__user-last-time",s.append(n),s.append(t),t.append(a),t.append(r),n.setAttribute("src",e.userAvatar),a.innerText=e.userName,r.innerText="был(а) 2 часа назад",N.before(s)},E=document.querySelector(".header__dropdown-button"),m=document.querySelector(".header__dropdown"),o=document.querySelector(".form-input"),d=new URLSearchParams(document.location.search).get("chatId"),w=p(d),I=e=>{if(e.preventDefault(),o.value==="")return;const s=g(o.value,d);f(s),o.value="",o.focus()};document.addEventListener("submit",I.bind(void 0));E.addEventListener("click",()=>{m.classList.toggle("header__dropdown--open")});document.addEventListener("click",e=>{m.classList.contains("header__dropdown--open")&&!e.target.classList.contains("header__dropdown-item")&&!e.target.classList.contains("header__dropdown-button")&&m.classList.remove("header__dropdown--open")});v(_(d));h(w);o.focus();
